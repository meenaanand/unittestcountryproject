<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <script>
            names = ['Krishna', 'Sathish', 'Hermana', 'Saan', 'lavanya'];
            updateindex = 0;
            function fetchall() {
                var html = "<table border='1|1'>";
                for (var i = 0; i < names.length; i++) {
                    
                    html += "<tr>";
                    html += "<td>" + names[i] + "</td>";
                    html += '<td><button onclick="edit(' + i + ')">Edit</button></td>';
                    html += '<td><button onclick="del(' + i + ')">Delete</button></td>';
                    html += "</tr>";
                }
                html += "</table>";
                document.getElementById("box").innerHTML = html;
            }
            function saveAndUpdate() {
                ((document.getElementById('myBtn').innerHTML == "submit") ? this.add() : this.update());
                // if (document.getElementById('myBtn').innerHTML == "submit") {
                //     this.add();
                // }
                // else {
                //     this.update();
                // }
            }
            function edit(i) {
                document.getElementById("myBtn").innerHTML = "update";
                document.getElementById("name").value = names[i];
                updateindex = i;
                fetchall();
            }
            function del(i) {
                names.splice(i, 1);
                fetchall();
            }
            function add() {
                el = document.getElementById('name');
                var name = el.value;
                if (name) {
                    names.push(name.trim());
                    el.value = '';
                    fetchall();
                }
            }
            function update() {
                el = document.getElementById('name');
                var name = el.value;
                names[updateindex] = name;
                alert(updateindex);
                alert(names);
                document.getElementById('name').value = '';
                document.getElementById('myBtn').innerHTML = 'submit';
                fetchall();
            }
        </script>
    </head>
    <body onload="fetchall()">
        <input type="text" name="name" id="name">
        <button type="submit" id="myBtn" onclick="saveAndUpdate()">submit</button>
        <!-- <button type="submit" value="(updateindex>0) ? 'Update' : 'Add' " onclick="updateindex>0 ? update() : add()">Add</button> -->
        <p id="box"></p>
    </body>
</html>